
type expr =
  | VarX
  | VarY
  | Sine of expr
  | Cosine of expr
  | Average of expr* expr
  | Times of expr* expr
  | Thresh of expr* expr* expr* expr;;

let rec eval (e,x,y) =
  match e with
  | VarX  -> x
  | VarY  -> y
  | Sine expr0 -> sin (eval (expr0, x, y))
  | Cosine expr0 -> cos (eval (expr0, x, y))
  | Average (expr0,expr1) ->
      ((eval (expr0, x, y)) +. (eval (expr1, x, y))) /. 2
  | Times (expr0,expr1) -> (eval (expr0, x, y)) *. (eval (expr1, x, y))
  | Thresh (expr0,expr1,expr2,expr3) ->
      (match (eval (expr0, x, y)) < (eval (expr1, x, y)) with
       | true  -> eval (expr2, x, y)
       | false  -> eval (expr3, x, y));;


(* fix

type expr =
  | VarX
  | VarY
  | Sine of expr
  | Cosine of expr
  | Average of expr* expr
  | Times of expr* expr
  | Thresh of expr* expr* expr* expr;;

let rec eval (e,x,y) =
  match e with
  | VarX  -> x
  | VarY  -> y
  | Sine expr0 -> sin (eval (expr0, x, y))
  | Cosine expr0 -> cos (eval (expr0, x, y))
  | Average (expr0,expr1) ->
      ((eval (expr0, x, y)) +. (eval (expr1, x, y))) /. 2.
  | Times (expr0,expr1) -> (eval (expr0, x, y)) *. (eval (expr1, x, y))
  | Thresh (expr0,expr1,expr2,expr3) ->
      (match (eval (expr0, x, y)) < (eval (expr1, x, y)) with
       | true  -> eval (expr2, x, y)
       | false  -> eval (expr3, x, y));;

*)

(* changed spans
(18,57)-(18,58)
*)

(* type error slice
(11,15)-(23,37)
(12,3)-(23,37)
(12,3)-(23,37)
(12,3)-(23,37)
(12,3)-(23,37)
(12,3)-(23,37)
(12,3)-(23,37)
(12,3)-(23,37)
(12,3)-(23,37)
(12,3)-(23,37)
(12,3)-(23,37)
(12,3)-(23,37)
(12,3)-(23,37)
(12,3)-(23,37)
(12,3)-(23,37)
(12,3)-(23,37)
(12,3)-(23,37)
(12,9)-(12,10)
(13,14)-(13,15)
(14,14)-(14,15)
(15,19)-(15,22)
(15,19)-(15,41)
(15,19)-(15,41)
(15,24)-(15,28)
(15,24)-(15,41)
(15,24)-(15,41)
(15,30)-(15,35)
(15,30)-(15,41)
(15,37)-(15,38)
(15,40)-(15,41)
(16,21)-(16,24)
(16,21)-(16,43)
(16,26)-(16,30)
(16,26)-(16,43)
(16,26)-(16,43)
(16,32)-(16,37)
(16,32)-(16,43)
(16,39)-(16,40)
(16,42)-(16,43)
(18,9)-(18,13)
(18,9)-(18,26)
(18,9)-(18,26)
(18,9)-(18,50)
(18,9)-(18,58)
(18,9)-(18,58)
(18,15)-(18,20)
(18,15)-(18,26)
(18,22)-(18,23)
(18,25)-(18,26)
(18,33)-(18,37)
(18,33)-(18,50)
(18,33)-(18,50)
(18,39)-(18,44)
(18,39)-(18,50)
(18,46)-(18,47)
(18,49)-(18,50)
(18,57)-(18,58)
(19,29)-(19,33)
(19,29)-(19,46)
(19,29)-(19,46)
(19,29)-(19,70)
(19,35)-(19,40)
(19,35)-(19,46)
(19,42)-(19,43)
(19,45)-(19,46)
(19,53)-(19,57)
(19,53)-(19,70)
(19,53)-(19,70)
(19,59)-(19,64)
(19,59)-(19,70)
(19,66)-(19,67)
(19,69)-(19,70)
(21,8)-(23,37)
(21,8)-(23,37)
(21,15)-(21,19)
(21,15)-(21,32)
(21,15)-(21,32)
(21,15)-(21,55)
(21,15)-(21,55)
(21,21)-(21,26)
(21,21)-(21,32)
(21,28)-(21,29)
(21,31)-(21,32)
(21,38)-(21,42)
(21,38)-(21,55)
(21,38)-(21,55)
(21,44)-(21,49)
(21,44)-(21,55)
(21,51)-(21,52)
(21,54)-(21,55)
(22,19)-(22,23)
(22,19)-(22,36)
(22,19)-(22,36)
(22,25)-(22,30)
(22,25)-(22,36)
(22,32)-(22,33)
(22,35)-(22,36)
(23,20)-(23,24)
(23,20)-(23,37)
(23,20)-(23,37)
(23,26)-(23,31)
(23,26)-(23,37)
(23,33)-(23,34)
(23,36)-(23,37)
*)
