\section{Evaluation}
\label{sec:evaluation}

\pgfplotstableset{col sep=comma}

\pgfplotstableread{../../data/sp14/op+type+size/linear/results.csv}{\FeatureLinearBench}
\pgfplotstablevertcat{\FeatureLinearBench}{../../data/sp14/op+context+type+size/linear/results.csv}
\pgfplotstablevertcat{\FeatureLinearBench}{../../data/sp14/op+context-has+type+size/linear/results.csv}
\pgfplotstablevertcat{\FeatureLinearBench}{../../data/sp14/op+context-count+type+size/linear/results.csv}
\pgfplotstableread{../../data/sp14/op+type+size/hidden-10/results.csv}{\FeatureHiddenTBench}
\pgfplotstablevertcat{\FeatureHiddenTBench}{../../data/sp14/op+context+type+size/hidden-10/results.csv}
\pgfplotstablevertcat{\FeatureHiddenTBench}{../../data/sp14/op+context-has+type+size/hidden-10/results.csv}
\pgfplotstablevertcat{\FeatureHiddenTBench}{../../data/sp14/op+context-count+type+size/hidden-10/results.csv}
\pgfplotstableread{../../data/sp14/op+type+size/hidden-500/results.csv}{\FeatureHiddenFHBench}
\pgfplotstablevertcat{\FeatureHiddenFHBench}{../../data/sp14/op+context+type+size/hidden-500/results.csv}
\pgfplotstablevertcat{\FeatureHiddenFHBench}{../../data/sp14/op+context-has+type+size/hidden-500/results.csv}
\pgfplotstablevertcat{\FeatureHiddenFHBench}{../../data/sp14/op+context-count+type+size/hidden-500/results.csv}

\pgfplotstableread{../../data/sp14/op+type+size/hidden-10/results.csv}{\HiddenBench}
\pgfplotstablevertcat{\HiddenBench}{../../data/sp14/op+type+size/hidden-25/results.csv}
\pgfplotstablevertcat{\HiddenBench}{../../data/sp14/op+type+size/hidden-50/results.csv}
\pgfplotstablevertcat{\HiddenBench}{../../data/sp14/op+type+size/hidden-100/results.csv}
\pgfplotstablevertcat{\HiddenBench}{../../data/sp14/op+type+size/hidden-250/results.csv}
\pgfplotstablevertcat{\HiddenBench}{../../data/sp14/op+type+size/hidden-500/results.csv}
% \pgfplotstablevertcat{\HiddenBench}{../../data/sp14/op+context-count+type+size/hidden-10/results.csv}
% \pgfplotstablevertcat{\HiddenBench}{../../data/sp14/op+context-count+type+size/hidden-25/results.csv}
% \pgfplotstablevertcat{\HiddenBench}{../../data/sp14/op+context-count+type+size/hidden-50/results.csv}
% \pgfplotstablevertcat{\HiddenBench}{../../data/sp14/op+context-count+type+size/hidden-100/results.csv}
% \pgfplotstablevertcat{\HiddenBench}{../../data/sp14/op+context-count+type+size/hidden-250/results.csv}
% \pgfplotstablevertcat{\HiddenBench}{../../data/sp14/op+context-count+type+size/hidden-500/results.csv}

\pgfplotstableread{../../data/sp14/baseline.csv}{\SpringBench}
\pgfplotstablevertcat{\SpringBench}{../../data/sp14/ocaml/results.csv}
\pgfplotstablevertcat{\SpringBench}{../../data/sp14/mycroft/results.csv}
\pgfplotstablevertcat{\SpringBench}{../../data/sp14/sherrloc/results.csv}
\pgfplotstablevertcat{\SpringBench}{../../data/sp14/op+type+size/linear/results.csv}
\pgfplotstablevertcat{\SpringBench}{../../data/sp14/op+type+size/hidden-10/results.csv}
\pgfplotstablevertcat{\SpringBench}{../../data/sp14/op+type+size/hidden-500/results.csv}

\pgfplotstableread{../../data/fa15/baseline.csv}{\FallBench}
\pgfplotstablevertcat{\FallBench}{../../data/fa15/ocaml/results.csv}
\pgfplotstablevertcat{\FallBench}{../../data/fa15/mycroft/results.csv}
\pgfplotstablevertcat{\FallBench}{../../data/fa15/sherrloc/results.csv}
\pgfplotstablevertcat{\FallBench}{../../data/fa15/op+type+size/linear/results.csv}
\pgfplotstablevertcat{\FallBench}{../../data/fa15/op+type+size/hidden-10/results.csv}
\pgfplotstablevertcat{\FallBench}{../../data/fa15/op+type+size/hidden-500/results.csv}

\definecolor{blue1}{HTML}{DEEBF7}
\definecolor{blue2}{HTML}{9ECAE1}
\definecolor{blue3}{HTML}{3182BD}

\begin{figure}[ht]
\centering
\begin{tikzpicture}
\begin{axis}[
  % ybar stacked,
  width=12cm,
  height=8cm,
  title={Impact of Feature Set on Accuracy},
  ylabel={Accuracy},
  %ymin=0.2,
  ymax=1,
  yticklabel={\pgfmathparse{\tick*100}\pgfmathprintnumber{\pgfmathresult}\,\%},
  ytick style={draw=none},
  ymajorgrids = true,
  symbolic x coords={op+type+size, op+context+type+size, op+context-has+type+size, op+context-count+type+size},
  % enlarge x limits=0.25,
  xtick=data,
  xtick style={draw=none},
  xticklabels={Type, Context, Context-Has, Context-Count},
  x tick label style={rotate=45},
  reverse legend,
  transpose legend,
  legend style={legend pos = outer north east, legend columns=4},
]
% \addplot[draw=black, fill=blue1] table[x=tool, y=top-1] {\HiddenBench};
% \addplot[draw=black, fill=blue2] table[x=tool, y expr=\thisrow{top-2} - \thisrow{top-1}] {\HiddenBench};
% \addplot[draw=black, fill=blue3] table[x=tool, y expr=\thisrow{top-3} - \thisrow{top-2}] {\HiddenBench};

\addplot[mark options={fill=blue1, scale=1.5}, mark=square*]
  table[x=features, y=top-1] {\FeatureHiddenFHBench};
\addplot[mark options={fill=blue2, scale=1.5}, mark=square*]
  table[x=features, y=top-2] {\FeatureHiddenFHBench};
\addplot[mark options={fill=blue3, scale=1.5}, mark=square*]
  table[x=features, y=top-3] {\FeatureHiddenFHBench};
\addlegendentry{Top 1}
\addlegendentry{Top 2}
\addlegendentry{Top 3}
\addlegendimage{empty legend}
\addlegendentry{\hiddenFH}

\addplot[mark options={fill=blue1, scale=1.5}, mark=*]
  table[x=features, y=top-1] {\FeatureLinearBench};
\addplot[mark options={fill=blue2, scale=1.5}, mark=*]
  table[x=features, y=top-2] {\FeatureLinearBench};
\addplot[mark options={fill=blue3, scale=1.5}, mark=*]
  table[x=features, y=top-3] {\FeatureLinearBench};
\addlegendentry{Top 1}
\addlegendentry{Top 2}
\addlegendentry{Top 3}
\addlegendimage{empty legend}
\addlegendentry{\linear}

\end{axis}
\end{tikzpicture}
\caption{reuslts!}
\label{fig:results}
\end{figure}

\begin{figure}[ht]
\centering
\begin{tikzpicture}
\begin{axis}[
  ybar stacked,
  width=12cm,
  height=8cm,
  title={Impact of Hidden Layer Size on Accuracy},
  ylabel={Accuracy},
  bar width=20pt,
  %ymin=0.2,
  ymax=1,
  yticklabel={\pgfmathparse{\tick*100}\pgfmathprintnumber{\pgfmathresult}\,\%},
  ytick style={draw=none},
  ymajorgrids = true,
  symbolic x coords={op+type+size/hidden-10, op+type+size/hidden-25, op+type+size/hidden-50,
                     op+type+size/hidden-100, op+type+size/hidden-250, op+type+size/hidden-500},
  % enlarge x limits=0.25,
  xtick=data,
  xtick style={draw=none},
  xticklabels={\hiddenT, \hiddenTF, \hiddenF, \hiddenH, \hiddenTHF, \hiddenFH},
  x tick label style={rotate=45},
  reverse legend,
  legend style={legend pos = north west},
]
\addplot[draw=black, fill=blue1] table[x=tool, y=top-1] {\HiddenBench};
\addplot[draw=black, fill=blue2] table[x=tool, y expr=\thisrow{top-2} - \thisrow{top-1}] {\HiddenBench};
\addplot[draw=black, fill=blue3] table[x=tool, y expr=\thisrow{top-3} - \thisrow{top-2}] {\HiddenBench};
% \addplot[draw=black, fill=blue1] table[x=tool, y=top-1] {\HiddenBench};
% \addplot[draw=black, fill=blue2] table[x=tool, y=top-2] {\HiddenBench};
% \addplot[draw=black, fill=blue3] table[x=tool, y=top-3] {\HiddenBench};
\legend{Top 1, Top 2, Top 3}
\end{axis}
\end{tikzpicture}
\caption{reuslts!}
\label{fig:results}
\end{figure}

\makeatletter
\newcommand\resetstackedplots{
\makeatletter
\pgfplots@stacked@isfirstplottrue
\makeatother
\addplot [forget plot,draw=none] coordinates{
  (baseline,0) (spacer1,0)
  (ocaml,0) (mycroft,0) (sherrloc,0) (spacer2,0)
  (op+type+size/linear,0) (op+type+size/hidden-10,0) (op+type+size/hidden-500,0)
};
}
\makeatother

\begin{figure}[ht]
\centering
\begin{tikzpicture}
\begin{axis}[
  ybar stacked,
  width=14cm,
  height=8cm,
  title={Comparison of Type-Error Localization Techniques},
  ylabel={Accuracy},
  bar width=0.5cm,
  ymin=0.2,
  ymax=1,
  yticklabel={\pgfmathparse{\tick*100}\pgfmathprintnumber{\pgfmathresult}\,\%},
  ytick style={draw=none},
  ymajorgrids = true,
  symbolic x coords={baseline, spacer1, ocaml, mycroft, sherrloc, spacer2,
                     op+type+size/linear, op+type+size/hidden-10,
                     op+type+size/hidden-500},
  % enlarge x limits=0.5,
  xtick=data,
  xtick style={draw=none},
  xticklabels={\baseline, \ocaml, \mycroft, \sherrloc,
               \linear, \hiddenT, \hiddenFH},
  x tick label style={rotate=45},
  reverse legend,
  transpose legend,
  legend style={legend pos = north west, legend columns=4},
]
\addplot[draw=black, fill=blue1, bar shift=-.25cm] table[x=tool, y=top-1] {\SpringBench};
\addplot[draw=black, fill=blue2, bar shift=-.25cm] table[x=tool, y expr=\thisrow{top-2} - \thisrow{top-1}] {\SpringBench};
\addplot[draw=black, fill=blue3, bar shift=-.25cm] table[x=tool, y expr=\thisrow{top-3} - \thisrow{top-2}] {\SpringBench};
\addlegendentry{Top 1}
\addlegendentry{Top 2}
\addlegendentry{Top 3}
\addlegendimage{empty legend}
\addlegendentry{FA15}

\resetstackedplots

\addplot[draw=black, fill=blue1, bar shift=.25cm] table[x=tool, y=top-1] {\FallBench};
\addplot[draw=black, fill=blue2, bar shift=.25cm] table[x=tool, y expr=\thisrow{top-2} - \thisrow{top-1}] {\FallBench};
\addplot[draw=black, fill=blue3, bar shift=.25cm] table[x=tool, y expr=\thisrow{top-3} - \thisrow{top-2}] {\FallBench};
\addlegendentry{Top 1}
\addlegendentry{Top 2}
\addlegendentry{Top 3}
\addlegendentry{SP14}
\addlegendimage{empty legend}
%\legend{Top 1, Top 2, Top 3}
\end{axis}
\end{tikzpicture}
\caption{reuslts!}
\label{fig:results}
\end{figure}








%%% Local Variables:
%%% mode: latex
%%% TeX-master: "main"
%%% End:
